<script type="text/javascript" src="<?php echo Yii::app()->baseUrl;?>/js/jquery.simplyscroll.js"></script>
<!--div class="content">
    <div class="vertical-slideshow-container">
        <div class="vert simply-scroll-container" style="height: 0px;">
            <div class="simply-scroll-clip">
                <div class="simply-scroll-list" style="height: 3254px;">
                    <ul class="slideshow-vertical simply-scroll-list" data-columnid="1">
                        <li data-mediaid="1973">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <h2>GQ UK123</h2>
                                        <p>Miranda Kerr</p>
                                        <img src="<?php echo Yii::app()->baseUrl;?>/images/next.png">
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li data-mediaid="1973">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <h2>GQ UK234</h2>
                                        <p>Miranda Kerr</p>
                                        <img src="<?php echo Yii::app()->baseUrl;?>/images/next.png">
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li data-mediaid="1973">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <h2>GQ UK345</h2>
                                        <p>Miranda Kerr</p>
                                        <img src="<?php echo Yii::app()->baseUrl;?>/images/next.png">
                                    </div>
                                </div>
                            </a>
                        </li>
                    </ul>
                    <ul class="slideshow-vertical simply-scroll-list" data-columnid="1">
                        <li data-mediaid="1973">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <h2>GQ UK123</h2>
                                        <p>Miranda Kerr</p>
                                        <img src="<?php echo Yii::app()->baseUrl;?>/images/next.png">
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li data-mediaid="1973">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <h2>GQ UK</h2>
                                        <p>Miranda Kerr</p>
                                        <img src="<?php echo Yii::app()->baseUrl;?>/images/next.png">
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li data-mediaid="1973">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <h2>GQ UK</h2>
                                        <p>Miranda Kerr</p>
                                        <img src="<?php echo Yii::app()->baseUrl;?>/images/next.png">
                                    </div>
                                </div>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="vert simply-scroll-container" style="height: 286px;">
            <div class="simply-scroll-clip">
                <div class="simply-scroll-list" style="height: 3254px;">
                    <ul class="slideshow-vertical simply-scroll-list" data-columnid="1">
                        <li data-mediaid="1973">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <div style="float:left;height:50px;left:10;display:block;">
                                            <h2>GQ UK1234</h2>
                                            <p>Miranda Kerr</p>
                                        </div> 
                                         <span class="infonext"></span> 
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li data-mediaid="1973">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <h2>GQ UK</h2>
                                        <p>Miranda Kerr</p>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li data-mediaid="1973">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <h2>GQ UK</h2>
                                        <p>Miranda Kerr</p>
                                        <img src="<?php echo Yii::app()->baseUrl;?>/images/next.png">
                                    </div>
                                </div>
                            </a>
                        </li>
                    </ul>
                    <ul class="slideshow-vertical simply-scroll-list" data-columnid="1">
                        <li data-mediaid="1973">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <h2>GQ UK</h2>
                                        <p>Miranda Kerr</p>
                                        <img src="<?php echo Yii::app()->baseUrl;?>/images/next.png">
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li data-mediaid="1973">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <h2>GQ UK</h2>
                                        <p>Miranda Kerr</p>
                                        <img src="<?php echo Yii::app()->baseUrl;?>/images/next.png">
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li data-mediaid="1973">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <h2>GQ UK</h2>
                                        <p>Miranda Kerr</p>
                                        <img src="<?php echo Yii::app()->baseUrl;?>/images/next.png">
                                    </div>
                                </div>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="vert simply-scroll-container" style="height: 286px;">
            <div class="simply-scroll-clip">
                <div class="simply-scroll-list" style="height: 3254px;">
                    <ul class="slideshow-vertical simply-scroll-list" data-columnid="1">
                        <li data-mediaid="11973">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <h2>GQ UK</h2>
                                        <p>Miranda Kerr</p>
                                        <img src="<?php echo Yii::app()->baseUrl;?>/images/next.png">
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li data-mediaid="11974">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <h2>GQ UK</h2>
                                        <p>Miranda Kerr</p>
                                        <img src="<?php echo Yii::app()->baseUrl;?>/images/next.png">
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li data-mediaid="11975">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <h2>GQ UK</h2>
                                        <p>Miranda Kerr</p>
                                        <img src="<?php echo Yii::app()->baseUrl;?>/images/next.png">
                                    </div>
                                </div>
                            </a>
                        </li>
                    </ul>
                    <ul class="slideshow-vertical simply-scroll-list" data-columnid="1">
                        <li data-mediaid="11973">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <h2>GQ UK</h2>
                                        <p>Miranda Kerr</p>
                                        <img src="<?php echo Yii::app()->baseUrl;?>/images/next.png">
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li data-mediaid="11974">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <h2>GQ UK</h2>
                                        <p>Miranda Kerr</p>
                                        <img src="<?php echo Yii::app()->baseUrl;?>/images/next.png">
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li data-mediaid="11975">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <h2>GQ UK</h2>
                                        <p>Miranda Kerr</p>
                                        <img src="<?php echo Yii::app()->baseUrl;?>/images/next.png">
                                    </div>
                                </div>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="vert simply-scroll-container" style="height: 286px;">
            <div class="simply-scroll-clip">
                <div class="simply-scroll-list" style="height: 3254px;">
                    <ul class="slideshow-vertical simply-scroll-list" data-columnid="1">
                        <li data-mediaid="1973">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <h2>GQ UK</h2>
                                        <p>Miranda Kerr</p>
                                        <img src="<?php echo Yii::app()->baseUrl;?>/images/next.png">
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li data-mediaid="1973">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <h2>GQ UK</h2>
                                        <p>Miranda Kerr</p>
                                        <img src="<?php echo Yii::app()->baseUrl;?>/images/next.png">
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li data-mediaid="1973">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <h2>GQ UK</h2>
                                        <p>Miranda Kerr</p>
                                        <img src="<?php echo Yii::app()->baseUrl;?>/images/next.png">
                                    </div>
                                </div>
                            </a>
                        </li>
                    </ul>
                    <ul class="slideshow-vertical simply-scroll-list" data-columnid="1">
                        <li data-mediaid="1973">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <h2>GQ UK</h2>
                                        <p>Miranda Kerr</p>
                                        <img src="<?php echo Yii::app()->baseUrl;?>/images/next.png">
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li data-mediaid="1973">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <h2>GQ UK</h2>
                                        <p>Miranda Kerr</p>
                                        <img src="<?php echo Yii::app()->baseUrl;?>/images/next.png">
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li data-mediaid="1973">
                            <a href="#">
                                <div class="slide" data-urlpath="#" data-title="GQ UK" data-description="May 2014">
                                    <img src="<?php echo Yii::app()->baseUrl;?>/images/1.jpg">
                                    <div class="information">
                                        <h2>GQ UK</h2>
                                        <p>Miranda Kerr</p>
                                        <img src="<?php echo Yii::app()->baseUrl;?>/images/next.png">
                                    </div>
                                </div>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div-->
<div id="loadingIcon">
    <div class="img-field">
        <img src="<?php echo Yii::app()->baseUrl;?>/images/loading.gif" />
        <span>Loading</span>
    </div>    
</div>
<div class="vertical-slideshow-container">
    <ul class="slideshow-vertical" style="display: none;">
        <?php foreach($cids as $cid){?>
            <li data-mediaId="<?php echo $cid;?>">
            </li>
        <?php }?>
    </ul>
</div>
<script type="text/javascript">
    // The Vertical Slideshow Starts
    
    // Destroys the running slideshow
     function verticalslide_destroyer() {
        // Removes everything except the last one
        var $element = $(".simply-scroll-list");
        $element.each(function (i, el) {
            var $el = $(el).find('.slideshow-vertical');
            if ($el.length > 0){
                $el.slice(1).remove();
            }
            $el.css("height", "auto").unwrap().unwrap().unwrap();
        });
        
        // Removes the last one
        var $element = $(".simply-scroll-container").last();
        //$element.remove();
        var $el = $element.find('.slideshow-vertical');
        if ($el.length > 0) {
            $el.slice(1).remove();
        }
        $el.css("height", "auto").unwrap().unwrap();
        
        //$(".slideshow-vertical").unwrap().removeClass('simply-scroll-list').css('height', 'auto');
    }
    
    // Create new unordered lists {list_num}
    function relayout(list_num) {
        var slides = [];
        
        // Grab all the slides
        $(".slideshow-vertical").each(function (i, data) {
            var $this = $(data);
            $this.find("> li").each(function(j, d){
                slides.push({
                    'mediaId': $(d).attr('data-mediaId'),
                    'html': $(d).html()
                });
            });
            $this.remove();
        });
        
        var slidesPerColumn = Math.floor(slides.length / list_num);
        var slideShowStr = '';
        var i = j = slideCounter = 0;
        for(i = 0; i < list_num; i++) {
            slideShowStr += '<ul class="slideshow-vertical" data-columnId="' + (i + 1) + '">';
            for(j = 0; j < slidesPerColumn; j++) {
                slideCounter = j + (i * slidesPerColumn);
                slideShowStr += '<li data-mediaId="' + slides[slideCounter].mediaId + '">' + slides[slideCounter].html + '</li>';
            }
            slideShowStr += '</ul>';
        }
        $(".vertical-slideshow-container").html(slideShowStr);
        var columnCounter = 1;
        for(slideCounter = slideCounter + 1; slideCounter < slides.length; slideCounter++) {
            if (columnCounter > list_num) {
                columnCounter = 1;
            }
            $('.slideshow-vertical[data-columnId="' + columnCounter++ + '"]').append('<li data-mediaId="' + slides[slideCounter].mediaId + '">' + slides[slideCounter].html + '</li>');
        }
    }
    
    function slideshow_initializer() {
        var counter = 0;
        $(".slideshow-vertical").each(function (i, data) {
            counter++;
            if(counter % 2 == 0)
                $(this).simplyScroll({orientation: 'vertical', customClass: 'vert', direction: 'backwards', speed: 1});
            else
                $(this).simplyScroll({orientation: 'vertical', customClass: 'vert', direction: 'forwards', speed: 1});
        });
        $(".vert").height($(window).height() - 133);
        
        $('#main').imagesLoaded(function () {
            $('.video-slide .vid').each(function () {
                $(this).get(0).play();
            });
        });
    }
    
    var useAjaxToGetMedia = true;
    var mediaArr = new Array();
    <?php foreach($cids as $cid){?>
        mediaArr[mediaArr.length] = "<?php echo $cid;?>";
    <?php }?>
    //var mediaArr = ["2081","1886","2018","2079","1600","1716","1863","2070","10","1898","1873","1681","1881","1818","2029","2076","2069","1630","1671","2096","238","1799","1973","1828"];
    var mediaReadyArr = [];
    var mediaReady = false;
    
    var window_width = $(window).width(), breakpoint = "";
    
    function runSlideShow() {
        window_width = $(window).width();
        if (window_width <= 768) {
            breakpoint = "mobile";
            verticalslide_destroyer();
            relayout(2);
            slideshow_initializer();
        } else if (window_width < 1024) {
            breakpoint = "tablet";
            verticalslide_destroyer();
            relayout(2);
            slideshow_initializer();
        } else {
            breakpoint = "desktop";
            verticalslide_destroyer();
            relayout(4);
            slideshow_initializer();
        }
    }
    
    $(document).ready(function () {
        if (typeof(useAjaxToGetMedia) != 'undefined' && useAjaxToGetMedia === true
            && typeof(mediaArr) && mediaArr.length > 0) {
            for(i = 0; i < mediaArr.length; i++) {
                $.ajax({
                    type: 'get',
                    dataType: 'json',
                    async: true,
                    data: {
                        mediaId: mediaArr[i]
                    },
                    //url: siteUrl + 'getMedia'
                    url: siteUrl + 'yj/index.php/index/getIndexMedia'
                }).done(function (data) {
                    //console.log(data);
                    var mediaStr = '';
                    var mediaElement = $('<a href="' + data.link + '"></a>');
                    
                    var mediaSubTitle = '';
                    if (typeof(data.subTitle) != 'undefined' && data.subTitle != '') {
                        mediaSubTitle = '<p>' + data.subTitle + '</p>';
                    }
                    
                    if (data.type == 'video') {
                        var previewStr = '<img src="' + data.image + '" />';
                        var dataVideoPreviewStr = '';
                        if (typeof(data.videoPreview) != 'undefined' && data.videoPreview != null) {
                            mediaElement.attr('data-thumbnail', data.image);
                            dataVideoPreviewStr = data.videoPreview;
                            
                            var ww = Math.min($(window).width(), 1920);
                            if (ww > 1024) {
                                previewStr = '<video id="vid" class="vid" autoplay width="100%" heigh="auto" loop>'
                                           + '<source src="' + data.videoPreview + '" type="video/mp4" />'
                                           + '</video>';
                            } else {
                                previewStr = '<img src="' + data.image + '" />';
                            }
                        }
                        mediaStr = '<div class="slide video-slide" data-thumbnail="' + data.image + '" data-videoPreview="' + dataVideoPreviewStr + '">'
                                 + previewStr
                                 + '<div class="information">'
                                 + '<h2>' + data.title + '</h2>'
                                 + mediaSubTitle
                                 + '</div>'
                                 + '</div>';
                    } else if (data.type == 'gallery') {
                        mediaStr = '<div class="slide" data-urlpath="' + data.link + '" data-title="' + data.title + '" data-description="' + data.description + '">'
                                 + '<img src="' +  data.image + '" />'
                                 + '<div class="information">'
                                 + '<h2>' + data.title + '</h2>'
                                 + mediaSubTitle
                                 + '<span class="infonext"></span>'
                                 + '</div>'
                                 + '</div>';
                    }
                    //mediaElement.html(mediaStr);
                    var _html = '<a href="' + data.link + '">'+ mediaStr +'</a>';
                    $('.vertical-slideshow-container li[data-mediaId="' + data.mediaId + '"]').append(_html);
                    
                    mediaReadyArr.push(data.mediaId);
                    if (mediaReadyArr.length == mediaArr.length) {
                        mediaReady = true;
                        $('#loadingIcon').hide();
                        runSlideShow();
                    }
                }).fail(function (data) {
                    console.log(data);
                });
            }
        }
        runSlideShow();
    });
    
    $(window).on("load resize", function() {
        if (mediaReady === true) {
            runSlideShow();
        }
    });
</script>