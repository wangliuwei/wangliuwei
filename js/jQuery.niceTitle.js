(function(a){a.fn.niceTitle=function(m){m=a.extend({},a.fn.niceTitle.defaults,m);var l=this;a(window).width();a(window).height();var q=a(document).scrollTop(),r=a(document).scrollLeft();a(document).height();_domWidth=a(document).width();this.initialize=function(c){a(window).scroll(function(){q=a(document).scrollTop();r=a(document).scrollLeft()});var n="";n='<div id="niceTitle"><div class="tip_arrow"><div>&nbsp;</div></div>\t\t\t\t\t\t<table  border="0" cellspacing="0" cellpadding="0">\t\t\t\t\t\t\t\t<tr>\t\t\t\t\t\t\t\t\t\t<td class="lt"></td>\t\t\t\t\t\t\t\t\t\t<td class="t"></td>\t\t\t\t\t\t\t\t\t\t<td class="rt"></td>\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t<tr>\t\t\t\t\t\t\t\t\t\t<td class="lc"></td>\t\t\t\t\t\t\t\t\t\t<td class="c"><p><em></em></p></td>\t\t\t\t\t\t\t\t\t\t<td class="rc"></td>\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t<tr>\t\t\t\t\t\t\t\t\t\t<td class="lb"></td>\t\t\t\t\t\t\t\t\t\t<td class="b"></td>\t\t\t\t\t\t\t\t\t\t<td class="rb"></td>\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t</table><div class="tip_arrow"><div>&nbsp;</div></div>\t\t\t\t\t  </div>';
(function(){a(l).each(function(){var f=a(this).attr("title");a(this).removeAttr("title").attr("_title",f)})})();var p=function(f,d){f.tmpTitle=a(f).attr("_title");var b=a(n);b.addClass(c.className);var e=0,i=0;b.appendTo("body").find("p").prepend(f.tmpTitle).find("em").remove();var g=a(d.target).offset(),j=b.find("div.tip_arrow");a.each(j,function(s,o){s==0?a(o).show():a(o).hide()});i=g.left+c.x>b.width()?g.left-b.width()+c.x:g.left+a(d.target).width()+c.x;e=g.top+c.y>b.height()?g.top-b.height()+
c.y:g.top+a(d.target).height()+c.y;b.css({position:"absolute","text-align":"left",opacity:c.opacity,"z-index":c.zIndex});var k=j=0,h="";if(g.left>i-c.x){j=b.width()-c.x-8;if(g.top>e){k=-1;h="rb"}else{k=1;h="rt"}}else{j=c.x+8-12;if(g.top>e){k=-1;h="lb"}else{k=1;h="lt"}}b.find("div.tip_arrow").hide();if(h=="rt"||h=="lt"){b.find("div.tip_arrow").eq(0).show();h=="lt"?b.css({top:e-Math.floor(a(d.target).height()/2)+"px",left:i+Math.floor(a(d.target).width()/2)-c.x+"px"}):b.css({top:e-Math.floor(a(d.target).height()/
2)+"px",left:i+Math.floor(a(d.target).width()/2)+"px"})}else{b.find("div.tip_arrow").eq(1).show();h=="lb"?b.css({top:e-Math.floor(a(d.target).height()/2)+"px",left:i-c.x+"px"}):b.css({top:e-Math.floor(a(d.target).height()/2)+"px",left:i+Math.floor(a(d.target).width()/2)+c.x+"px"})}d=b.find("div.tip_arrow");d.find(">div").css({left:j,top:k});d.removeClass().addClass("tip_arrow").addClass(h);b.show();a(f).data("jp_tip",b);return b};if(c.clickShow){c.className&&a(window).resize(function(){a("div."+c.className+
":visible").size()>0&&a(document).trigger("click")});a(l).click(function(f){var d=a(this).data("jp_tip");if(d&&d.is(":visible")){a(document).trigger("click");return false}var b=p(this,f);b.click(function(e){e.stopPropagation&&e.stopPropagation();e.cancelBubble=true});typeof c.clickShow!=="boolean"&&b.hide().fadeIn(c.clickShow);a(document).trigger("click");a(document).bind("click",function(){b.hide();a(document).unbind("click",arguments.callee)});return false})}else a(l).mouseover(function(f){p(this,
f);return false}).mouseout(function(){a(this).data("jp_tip").hide();return false});return l};this.initialize(m)};a.fn.niceTitle.defaults={x:10,y:10,zIndex:99999,clickShow:false,maxWidth:250,minHeight:30,opacity:1,className:"NiceTitleTip",brFlag:"|"}})(jQuery);
